from PIL import Image
import urllib.request
from io import BytesIO
import numpy as np
from math import sqrt

def colorDist(c1, c2):
    rdist = c1[0] - c2[0]
    gdist = c1[1] - c2[1]
    bdist = c1[2] - c2[2]
    return sqrt(rdist * rdist + gdist * gdist + bdist * bdist)

Palette1 = [
    # Format - list of ints, used in PIL
    0,0,0,
    87,87,87,
    160,160,160,
    156,39,176,
    157,175,255,
    42,75,215,
    41,208,208,
    76,175,80,
    198,255,0,
    255,238,51,
    255,146,51,

    233,222,187,
    129,74,25,
    248,187,208,
    244,67,54,
    173,35,35,
    255,255,255
]

Palette2 = [
    # Format - list of ints, used by humans
    (0,0,0),
    (87,87,87),
    (160,160,160),
    (156,39,176),
    (157,175,255),
    (42,75,215),
    (41,208,208),
    (76,175,80),
    (198,255,0),
    (255,238,51),
    (255,146,51),

    (233,222,187),
    (129,74,25),
    (248,187,208),
    (244,67,54),
    (173,35,35),
    (255,255,255)
]
while len(Palette1) < 768:
    Palette1.append(0)

# url = "https://ctl.s6img.com/society6/img/UPB_Z6mA6neMT-KwPmKnXY1EvcU/w_700/prints/~artwork/s6-0024/a/9774180_2379400/~~/edgar-allan-poe-5fv-prints.jpg"
# TODO bug in Poe picture. Doesn't convert to palette as expected

url = "data:image/jpeg;base64,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"
response = urllib.request.urlopen(url).read()
img = Image.open(BytesIO(response))
img = img.resize((200,100))
img = img.convert("P", palette=Image.ADAPTIVE, colors=256)
img.show()
img.putpalette(Palette1)
# TODO bug in putpalette. Doesn't convert as expected
img.show()

# Can convert to color palette by going through each pixel, and each color in palette. Slow
for i in range(img.size[0]):
    for j in range(img.size[1]):
        pix = img.getpixel((i,j))
        dist = colorDist(pix, Palette2[0])
        for color in Palette2:
            check = colorDist(pix, color)
            if check < dist:
                dist = check
                newColor = color
        img.putpixel((i,j), newColor)



# Avoid using numpy unless necessary. Haven't needed complex array manipulation or mathematics yet.
# ary = np.array(img)
# for i in range(len(ary)):
#     for j in range(len(ary[i])):
#         dist = colorDist(ary[i][j], Palette[0])
#         for color in Palette:
#             check = colorDist(ary[i][j], color)
#             if check < dist:
#                 dist = check
#                 newColor = color
#         ary[i][j] = newColor
#         # ary[i][j] = (sum(ary[i][j])*3)
# img = Image.fromarray(ary)
